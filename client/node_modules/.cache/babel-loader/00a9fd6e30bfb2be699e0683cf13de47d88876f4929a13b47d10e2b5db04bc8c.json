{"ast":null,"code":"const connectWebSocket = (chatId, username, onMessageCallback) => {\n  return new Promise((resolve, reject) => {\n    const ws = new WebSocket(`ws://localhost:8071/ws?chat_id=${chatId}`);\n    ws.onopen = () => {\n      console.log(\"WebSocket connection established.\");\n      const bootupMessage = JSON.stringify({\n        type: \"BOOTUP\",\n        chat_id: chatId,\n        username: username,\n        timestamp: new Date().toISOString()\n      });\n      ws.send(bootupMessage);\n      console.log(\"BOOTUP message sent.\");\n      resolve(ws);\n    };\n    ws.onerror = error => {\n      console.error(\"WebSocket error:\", error);\n      reject(error);\n    };\n    ws.onclose = () => {\n      const disconnectMessage = JSON.stringify({\n        type: \"DISCONNECT\",\n        chat_id: chatId,\n        username: username,\n        timestamp: new Date().toISOString()\n      });\n      ws.send(disconnectMessage);\n      console.log(\"WebSocket connection closed.\");\n    };\n    ws.onmessage = event => {\n      if (onMessageCallback) {\n        onMessageCallback(event.data);\n      }\n      console.log(\"Message from server:\", event.data);\n    };\n  });\n};\nexport { connectWebSocket };","map":{"version":3,"names":["connectWebSocket","chatId","username","onMessageCallback","Promise","resolve","reject","ws","WebSocket","onopen","console","log","bootupMessage","JSON","stringify","type","chat_id","timestamp","Date","toISOString","send","onerror","error","onclose","disconnectMessage","onmessage","event","data"],"sources":["/Users/shreeyashnaik/Desktop/Zeta/go-socket-pg/client/src/utils/websocket.js"],"sourcesContent":["const connectWebSocket = (chatId, username, onMessageCallback) => {\n    return new Promise((resolve, reject) => {\n        const ws = new WebSocket(`ws://localhost:8071/ws?chat_id=${chatId}`);\n    \n        ws.onopen = () => {\n            console.log(\"WebSocket connection established.\");\n            const bootupMessage = JSON.stringify({\n                type: \"BOOTUP\",\n                chat_id: chatId,\n                username: username,\n                timestamp: new Date().toISOString(),\n            });\n            ws.send(bootupMessage);\n            console.log(\"BOOTUP message sent.\");\n            resolve(ws);\n        };\n    \n        ws.onerror = (error) => {\n            console.error(\"WebSocket error:\", error);\n            reject(error);\n        };\n    \n        ws.onclose = () => {\n            const disconnectMessage = JSON.stringify({\n                type: \"DISCONNECT\",\n                chat_id: chatId,\n                username: username,\n                timestamp: new Date().toISOString(),\n            });\n            ws.send(disconnectMessage);\n            console.log(\"WebSocket connection closed.\");\n        };\n    \n        ws.onmessage = (event) => {\n            if (onMessageCallback) {\n                onMessageCallback(event.data);\n            }\n            console.log(\"Message from server:\", event.data);\n        };\n    });\n};\n\nexport { connectWebSocket };"],"mappings":"AAAA,MAAMA,gBAAgB,GAAGA,CAACC,MAAM,EAAEC,QAAQ,EAAEC,iBAAiB,KAAK;EAC9D,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACpC,MAAMC,EAAE,GAAG,IAAIC,SAAS,CAAC,kCAAkCP,MAAM,EAAE,CAAC;IAEpEM,EAAE,CAACE,MAAM,GAAG,MAAM;MACdC,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAC;MAChD,MAAMC,aAAa,GAAGC,IAAI,CAACC,SAAS,CAAC;QACjCC,IAAI,EAAE,QAAQ;QACdC,OAAO,EAAEf,MAAM;QACfC,QAAQ,EAAEA,QAAQ;QAClBe,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;MACtC,CAAC,CAAC;MACFZ,EAAE,CAACa,IAAI,CAACR,aAAa,CAAC;MACtBF,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;MACnCN,OAAO,CAACE,EAAE,CAAC;IACf,CAAC;IAEDA,EAAE,CAACc,OAAO,GAAIC,KAAK,IAAK;MACpBZ,OAAO,CAACY,KAAK,CAAC,kBAAkB,EAAEA,KAAK,CAAC;MACxChB,MAAM,CAACgB,KAAK,CAAC;IACjB,CAAC;IAEDf,EAAE,CAACgB,OAAO,GAAG,MAAM;MACf,MAAMC,iBAAiB,GAAGX,IAAI,CAACC,SAAS,CAAC;QACrCC,IAAI,EAAE,YAAY;QAClBC,OAAO,EAAEf,MAAM;QACfC,QAAQ,EAAEA,QAAQ;QAClBe,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;MACtC,CAAC,CAAC;MACFZ,EAAE,CAACa,IAAI,CAACI,iBAAiB,CAAC;MAC1Bd,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC;IAC/C,CAAC;IAEDJ,EAAE,CAACkB,SAAS,GAAIC,KAAK,IAAK;MACtB,IAAIvB,iBAAiB,EAAE;QACnBA,iBAAiB,CAACuB,KAAK,CAACC,IAAI,CAAC;MACjC;MACAjB,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEe,KAAK,CAACC,IAAI,CAAC;IACnD,CAAC;EACL,CAAC,CAAC;AACN,CAAC;AAED,SAAS3B,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}